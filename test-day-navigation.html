<!DOCTYPE html>
<html>
<head>
    <title>Test Day-wise Navigation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block; }
        button:hover, a.button:hover { background: #0056b3; }
        .nav-button { padding: 8px 16px; margin: 3px; font-size: 14px; }
        .date-display { font-size: 18px; font-weight: bold; color: #333; margin: 10px 0; }
        ul { margin: 10px 0; padding-left: 25px; }
        li { margin: 8px 0; }
        .highlight { background: #ffeb3b; padding: 2px 4px; border-radius: 3px; }
        .expected { color: #28a745; font-weight: bold; }
    </style>
</head>
<body>
    <h1>🗓️ Day-wise Navigation Test</h1>
    
    <div class="test-section info">
        <h2>📋 What to Test</h2>
        <p>This page helps you test the improved day-wise navigation functionality.</p>
        <p><strong>Expected Behavior:</strong></p>
        <ul>
            <li>✅ <span class="expected">Previous/Next buttons</span> should navigate between days and show only tasks for that specific day</li>
            <li>✅ <span class="expected">Date picker</span> should jump to selected date and show only tasks for that date</li>
            <li>✅ <span class="expected">"Today" tab</span> should remain highlighted when viewing any date</li>
            <li>✅ <span class="expected">Page title</span> should update to show the correct date</li>
        </ul>
    </div>

    <div class="test-section warning">
        <h2>⚡ Quick Navigation Tests</h2>
        <p><strong>Click these links and verify the behavior:</strong></p>
        
        <div class="date-display">Today: <script>document.write(new Date().toLocaleDateString());</script></div>
        
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0;">
            <a href="index.php?page=today" class="button nav-button">📅 Today</a>
            <a href="index.php?page=day&date=2024-01-15" class="button nav-button">📅 Jan 15, 2024</a>
            <a href="index.php?page=day&date=2024-06-10" class="button nav-button">📅 Jun 10, 2024</a>
            <a href="index.php?page=day&date=2024-12-25" class="button nav-button">📅 Dec 25, 2024</a>
        </div>
        
        <div style="margin: 15px 0;">
            <strong>Dynamic Date Tests:</strong>
        </div>
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0;" id="dynamicDates">
            <!-- Dynamic dates will be added here by JavaScript -->
        </div>
    </div>
    
    <div class="test-section">
        <h2>🔍 Step-by-Step Test</h2>
        <ol>
            <li>
                <strong>Open Today's Tasks:</strong> 
                <a href="index.php" target="_blank" class="button nav-button">🏠 Home</a>
                <ul>
                    <li><span class="highlight">Should show:</span> "Today's Tasks" in title</li>
                    <li><span class="highlight">Should display:</span> Only tasks assigned for today</li>
                    <li><span class="highlight">Navigation:</span> Previous/Next buttons visible</li>
                </ul>
            </li>
            
            <li>
                <strong>Test Previous Day:</strong> Click the <strong>← Previous</strong> button
                <ul>
                    <li><span class="highlight">Should show:</span> "Yesterday's Tasks" in title</li>
                    <li><span class="highlight">Should display:</span> Only tasks for yesterday</li>
                    <li><span class="highlight">Date picker:</span> Should show yesterday's date</li>
                </ul>
            </li>
            
            <li>
                <strong>Test Next Day:</strong> Click the <strong>→ Next</strong> button
                <ul>
                    <li><span class="highlight">Should show:</span> Appropriate date in title</li>
                    <li><span class="highlight">Should display:</span> Only tasks for that date</li>
                </ul>
            </li>
            
            <li>
                <strong>Test Date Picker:</strong> Use the date input field
                <ul>
                    <li><span class="highlight">Should jump:</span> To the selected date</li>
                    <li><span class="highlight">Should display:</span> Only tasks for selected date</li>
                </ul>
            </li>
            
            <li>
                <strong>Test Tab Highlighting:</strong> Notice the bottom navigation
                <ul>
                    <li><span class="highlight">Today tab:</span> Should stay highlighted (blue) for all date views</li>
                    <li><span class="highlight">Other tabs:</span> Should remain gray when viewing dates</li>
                </ul>
            </li>
        </ol>
    </div>
    
    <div class="test-section success">
        <h2>✅ Success Criteria</h2>
        <p><strong>The navigation is working correctly if:</strong></p>
        <ul>
            <li>✅ Each date shows ONLY tasks assigned to that specific date</li>
            <li>✅ Previous/Next buttons navigate smoothly between days</li>
            <li>✅ Date picker jumps accurately to selected dates</li>
            <li>✅ Page titles reflect the current date being viewed</li>
            <li>✅ "Today" tab stays highlighted for all day views</li>
            <li>✅ Empty dates show "No tasks found" instead of all tasks</li>
        </ul>
    </div>
    
    <div class="test-section info">
        <h2>🔧 If Something's Not Working</h2>
        <p><strong>Common issues and solutions:</strong></p>
        <ul>
            <li><strong>Shows all tasks on every date:</strong> Date filtering not working - check SQL queries</li>
            <li><strong>Previous/Next buttons don't work:</strong> JavaScript error - check browser console</li>
            <li><strong>Wrong tab highlighted:</strong> Navigation logic needs adjustment</li>
            <li><strong>Page titles incorrect:</strong> Date formatting or logic issue</li>
        </ul>
        
        <p><strong>Debug Tools:</strong></p>
        <div style="margin: 10px 0;">
            <a href="test-index-fix.php" target="_blank" class="button">🧪 Test Backend Logic</a>
            <a href="diagnose-task-issues.php" target="_blank" class="button">🔍 Diagnose Issues</a>
            <a href="create-test-tasks.php" target="_blank" class="button">➕ Create Test Data</a>
        </div>
    </div>

    <script>
        // Generate dynamic date buttons for testing
        function generateDynamicDates() {
            const container = document.getElementById('dynamicDates');
            const today = new Date();
            
            const dates = [
                { offset: -2, label: '2 Days Ago' },
                { offset: -1, label: 'Yesterday' },
                { offset: 0, label: 'Today' },
                { offset: 1, label: 'Tomorrow' },
                { offset: 2, label: '2 Days Later' },
                { offset: 7, label: 'Next Week' }
            ];
            
            dates.forEach(dateInfo => {
                const date = new Date(today);
                date.setDate(today.getDate() + dateInfo.offset);
                const dateString = date.toISOString().split('T')[0];
                
                const link = document.createElement('a');
                link.href = dateInfo.offset === 0 ? 'index.php?page=today' : `index.php?page=day&date=${dateString}`;
                link.className = 'button nav-button';
                link.target = '_blank';
                link.innerHTML = `📅 ${dateInfo.label} (${date.toLocaleDateString()})`;
                
                container.appendChild(link);
            });
        }
        
        // Generate the dynamic dates when page loads
        generateDynamicDates();
        
        // Add current date display
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            console.log('Test page loaded at:', now.toISOString());
        });
    </script>
</body>
</html>